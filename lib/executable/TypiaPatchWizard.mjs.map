{"version":3,"sources":["../../src/executable/TypiaPatchWizard.ts"],"sourcesContent":["import fs from \"fs\";\n\nexport namespace TypiaPatchWizard {\n  export const main = async (): Promise<void> => {\n    console.log(\"----------------------------------------\");\n    console.log(\" Typia Setup Wizard\");\n    console.log(\"----------------------------------------\");\n    console.log(\n      [\n        `Since TypeScript v5.3 update, \"tsc\" no more parses JSDoc comments.`,\n        ``,\n        `Therefore, \"typia\" revives the JSDoc parsing feature by patching \"tsc\".`,\n        ``,\n        `This is a temporary feature of \"typia\", and it would be removed when \"ts-patch\" being updated.`,\n      ].join(\"\\n\"),\n    );\n\n    await patch();\n  };\n\n  export const patch = async (): Promise<void> => {\n    const location: string = require.resolve(\"typescript/lib/tsc.js\");\n    const content: string = await fs.promises.readFile(location, \"utf8\");\n    if (content.indexOf(FROM_WITH_COMMENT) !== -1)\n      await fs.promises.writeFile(\n        location,\n        content.replace(FROM_WITH_COMMENT, TO_WITH_COMMENT),\n        \"utf8\",\n      );\n    else if (content.indexOf(FROM_ONLY) !== -1)\n      await fs.promises.writeFile(\n        location,\n        content.replace(FROM_ONLY, TO_ONLY),\n        \"utf8\",\n      );\n  };\n}\n\nconst FROM_WITH_COMMENT = `var defaultJSDocParsingMode = 2 /* ParseForTypeErrors */`;\nconst TO_WITH_COMMENT = `var defaultJSDocParsingMode = 0 /* ParseAll */`;\nconst FROM_ONLY = `var defaultJSDocParsingMode = 2`;\nconst TO_ONLY = `var defaultJSDocParsingMode = 0`;\n"],"mappings":";;;;;AAAA,OAAOA,QAAQ;;UAEEC,mBAAAA;oBACFC,OAAO,YAAA;AAClBC,YAAQC,IAAI,0CAAA;AACZD,YAAQC,IAAI,qBAAA;AACZD,YAAQC,IAAI,0CAAA;AACZD,YAAQC,IACN;MACE;MACA;MACA;MACA;MACA;MACAC,KAAK,IAAA,CAAA;AAGT,UAAMC,kBAAAA,MAAAA;EACR;oBAEaA,QAAQ,YAAA;AACnB,UAAMC,WAAmBC,UAAQC,QAAQ,uBAAA;AACzC,UAAMC,UAAkB,MAAMC,GAAGC,SAASC,SAASN,UAAU,MAAA;AAC7D,QAAIG,QAAQI,QAAQC,iBAAAA,MAAuB,GACzC,OAAMJ,GAAGC,SAASI,UAChBT,UACAG,QAAQO,QAAQF,mBAAmBG,eAAAA,GACnC,MAAA;aAEKR,QAAQI,QAAQK,SAAAA,MAAe,GACtC,OAAMR,GAAGC,SAASI,UAChBT,UACAG,QAAQO,QAAQE,WAAWC,OAAAA,GAC3B,MAAA;EAEN;AACF,GAlCiBnB,qBAAAA,mBAAAA,CAAAA,EAAAA;AAoCjB,IAAMc,oBAAoB;AAC1B,IAAMG,kBAAkB;AACxB,IAAMC,YAAY;AAClB,IAAMC,UAAU;","names":["fs","TypiaPatchWizard","main","console","log","join","patch","location","require","resolve","content","fs","promises","readFile","indexOf","FROM_WITH_COMMENT","writeFile","replace","TO_WITH_COMMENT","FROM_ONLY","TO_ONLY"]}