{"version":3,"sources":["../src/programmers/internal/template_to_pattern.ts","../src/programmers/internal/metadata_to_pattern.ts"],"sourcesContent":["import { Metadata } from \"../../schemas/metadata/Metadata\";\n\nimport { PatternUtil } from \"../../utils/PatternUtil\";\n\nimport { metadata_to_pattern } from \"./metadata_to_pattern\";\n\n/**\n * @internal\n */\nexport const template_to_pattern = (top: boolean) => (template: Metadata[]) => {\n  const pattern: string = template\n    .map((meta) => metadata_to_pattern(false)(meta))\n    .join(\"\");\n  return top ? PatternUtil.fix(pattern) : pattern;\n};\n","import { Metadata } from \"../../schemas/metadata/Metadata\";\n\nimport { PatternUtil } from \"../../utils/PatternUtil\";\n\nimport { template_to_pattern } from \"./template_to_pattern\";\n\n/**\n * @internal\n */\nexport const metadata_to_pattern =\n  (top: boolean) =>\n  (meta: Metadata): string => {\n    if (meta.atomics.find((a) => a.type === \"string\") !== undefined)\n      return \"(.*)\";\n\n    const values: string[] = meta.constants\n      .map((c) => {\n        if (c.type !== \"string\") return c.values.map((v) => v.toString());\n        return (c.values.map((v) => v.value) as string[]).map((str) =>\n          PatternUtil.escape(str),\n        );\n      })\n      .flat();\n    for (const a of meta.atomics)\n      if (a.type === \"number\" || a.type === \"bigint\")\n        values.push(PatternUtil.NUMBER);\n      else if (a.type === \"boolean\") values.push(PatternUtil.BOOLEAN);\n    for (const childTpl of meta.templates)\n      values.push(\"(\" + template_to_pattern(false)(childTpl) + \")\");\n\n    const pattern: string =\n      values.length === 1 ? values[0]! : \"(\" + values.join(\"|\") + \")\";\n    return top ? PatternUtil.fix(pattern) : pattern;\n  };\n"],"mappings":";;;;;;;;AASO,IAAMA,sBAAsB,wBAACC,QAAiB,CAACC,aAAAA;AACpD,QAAMC,UAAkBD,SACrBE,IAAI,CAACC,SAASC,oBAAoB,KAAA,EAAOD,IAAAA,CAAAA,EACzCE,KAAK,EAAA;AACR,SAAON,MAAMO,YAAYC,IAAIN,OAAAA,IAAWA;AAC1C,GALmC;;;ACA5B,IAAMO,sBACX,wBAACC,QACD,CAACC,SAAAA;AACC,MAAIA,KAAKC,QAAQC,KAAK,CAACC,MAAMA,EAAEC,SAAS,QAAA,MAAcC,OACpD,QAAO;AAET,QAAMC,SAAmBN,KAAKO,UAC3BC,IAAI,CAACC,MAAAA;AACJ,QAAIA,EAAEL,SAAS,SAAU,QAAOK,EAAEH,OAAOE,IAAI,CAACE,MAAMA,EAAEC,SAAQ,CAAA;AAC9D,WAAQF,EAAEH,OAAOE,IAAI,CAACE,MAAMA,EAAEE,KAAK,EAAeJ,IAAI,CAACK,QACrDC,YAAYC,OAAOF,GAAAA,CAAAA;EAEvB,CAAA,EACCG,KAAI;AACP,aAAWb,KAAKH,KAAKC,QACnB,KAAIE,EAAEC,SAAS,YAAYD,EAAEC,SAAS,SACpCE,QAAOW,KAAKH,YAAYI,MAAM;WACvBf,EAAEC,SAAS,UAAWE,QAAOW,KAAKH,YAAYK,OAAO;AAChE,aAAWC,YAAYpB,KAAKqB,UAC1Bf,QAAOW,KAAK,MAAMK,oBAAoB,KAAA,EAAOF,QAAAA,IAAY,GAAA;AAE3D,QAAMG,UACJjB,OAAOkB,WAAW,IAAIlB,OAAO,CAAA,IAAM,MAAMA,OAAOmB,KAAK,GAAA,IAAO;AAC9D,SAAO1B,MAAMe,YAAYY,IAAIH,OAAAA,IAAWA;AAC1C,GAvBA;","names":["template_to_pattern","top","template","pattern","map","meta","metadata_to_pattern","join","PatternUtil","fix","metadata_to_pattern","top","meta","atomics","find","a","type","undefined","values","constants","map","c","v","toString","value","str","PatternUtil","escape","flat","push","NUMBER","BOOLEAN","childTpl","templates","template_to_pattern","pattern","length","join","fix"]}