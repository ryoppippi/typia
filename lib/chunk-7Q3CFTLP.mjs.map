{"version":3,"sources":["../src/factories/internal/metadata/iterate_metadata_coalesce.ts"],"sourcesContent":["import ts from \"typescript\";\n\nimport { Metadata } from \"../../../schemas/metadata/Metadata\";\n\nimport { Writable } from \"../../../typings/Writable\";\n\nimport { TypeFactory } from \"../../TypeFactory\";\n\nexport const iterate_metadata_coalesce = (\n  meta: Metadata,\n  type: ts.Type,\n): boolean => {\n  const filter = (flag: ts.TypeFlags) => (type.getFlags() & flag) !== 0;\n  if (filter(ts.TypeFlags.Unknown) || filter(ts.TypeFlags.Any)) {\n    Writable(meta).any = true;\n    return true;\n  } else if (filter(ts.TypeFlags.Null)) {\n    Writable(meta).nullable = true;\n    return true;\n  } else if (\n    filter(ts.TypeFlags.Undefined) ||\n    filter(ts.TypeFlags.Never) ||\n    filter(ts.TypeFlags.Void) ||\n    filter(ts.TypeFlags.VoidLike)\n  ) {\n    Writable(meta).required = false;\n    return true;\n  } else if (TypeFactory.isFunction(type) === true) {\n    Writable(meta).functional = true;\n    return true;\n  }\n  return false;\n};\n"],"mappings":";;;;;;;;;;;AAAA,OAAOA,QAAQ;AAQR,IAAMC,4BAA4B,wBACvCC,MACAC,SAAAA;AAEA,QAAMC,SAAS,wBAACC,UAAwBF,KAAKG,SAAQ,IAAKD,UAAU,GAArD;AACf,MAAID,OAAOG,GAAGC,UAAUC,OAAO,KAAKL,OAAOG,GAAGC,UAAUE,GAAG,GAAG;AAC5DC,aAAST,IAAAA,EAAMU,MAAM;AACrB,WAAO;EACT,WAAWR,OAAOG,GAAGC,UAAUK,IAAI,GAAG;AACpCF,aAAST,IAAAA,EAAMY,WAAW;AAC1B,WAAO;EACT,WACEV,OAAOG,GAAGC,UAAUO,SAAS,KAC7BX,OAAOG,GAAGC,UAAUQ,KAAK,KACzBZ,OAAOG,GAAGC,UAAUS,IAAI,KACxBb,OAAOG,GAAGC,UAAUU,QAAQ,GAC5B;AACAP,aAAST,IAAAA,EAAMiB,WAAW;AAC1B,WAAO;EACT,WAAWC,YAAYC,WAAWlB,IAAAA,MAAU,MAAM;AAChDQ,aAAST,IAAAA,EAAMoB,aAAa;AAC5B,WAAO;EACT;AACA,SAAO;AACT,GAxByC;","names":["ts","iterate_metadata_coalesce","meta","type","filter","flag","getFlags","ts","TypeFlags","Unknown","Any","Writable","any","Null","nullable","Undefined","Never","Void","VoidLike","required","TypeFactory","isFunction","functional"]}