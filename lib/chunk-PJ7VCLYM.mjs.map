{"version":3,"sources":["../src/programmers/json/JsonAssertParseProgrammer.ts"],"sourcesContent":["import ts from \"typescript\";\n\nimport { IdentifierFactory } from \"../../factories/IdentifierFactory\";\nimport { JsonMetadataFactory } from \"../../factories/JsonMetadataFactory\";\nimport { StatementFactory } from \"../../factories/StatementFactory\";\nimport { TypeFactory } from \"../../factories/TypeFactory\";\n\nimport { IProject } from \"../../transformers/IProject\";\n\nimport { AssertProgrammer } from \"../AssertProgrammer\";\n\nexport namespace JsonAssertParseProgrammer {\n  export const write =\n    (project: IProject) =>\n    (modulo: ts.LeftHandSideExpression) =>\n    (type: ts.Type, name?: string, init?: ts.Expression): ts.ArrowFunction => {\n      JsonMetadataFactory.analyze(`typia.json.${modulo.getText()}`)(\n        project.checker,\n        project.context,\n      )(type);\n      return ts.factory.createArrowFunction(\n        undefined,\n        undefined,\n        [\n          IdentifierFactory.parameter(\"input\", TypeFactory.keyword(\"string\")),\n          AssertProgrammer.Guardian.parameter(init),\n        ],\n        ts.factory.createImportTypeNode(\n          ts.factory.createLiteralTypeNode(\n            ts.factory.createStringLiteral(\"typia\"),\n          ),\n          undefined,\n          ts.factory.createIdentifier(\"Primitive\"),\n          [\n            ts.factory.createTypeReferenceNode(\n              name ?? TypeFactory.getFullName(project.checker)(type),\n            ),\n          ],\n          false,\n        ),\n        undefined,\n        ts.factory.createBlock([\n          StatementFactory.constant(\n            \"assert\",\n            AssertProgrammer.write({\n              ...project,\n              options: {\n                ...project.options,\n                functional: false,\n                numeric: false,\n              },\n            })(modulo)(false)(type, name),\n          ),\n          ts.factory.createExpressionStatement(\n            ts.factory.createBinaryExpression(\n              ts.factory.createIdentifier(\"input\"),\n              ts.SyntaxKind.EqualsToken,\n              ts.factory.createCallExpression(\n                ts.factory.createIdentifier(\"JSON.parse\"),\n                undefined,\n                [ts.factory.createIdentifier(\"input\")],\n              ),\n            ),\n          ),\n          ts.factory.createReturnStatement(\n            ts.factory.createAsExpression(\n              ts.factory.createCallExpression(\n                ts.factory.createIdentifier(\"assert\"),\n                undefined,\n                [\n                  ts.factory.createIdentifier(\"input\"),\n                  AssertProgrammer.Guardian.identifier(),\n                ],\n              ),\n              ts.factory.createTypeReferenceNode(\"any\"),\n            ),\n          ),\n        ]),\n      );\n    };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA,OAAOA,QAAQ;;UAWEC,4BAAAA;6BACFC,QACX,CAACC,YACD,CAACC,WACD,CAACC,MAAeC,MAAeC,SAAAA;AAC7BC,wBAAoBC,QAAQ,cAAcL,OAAOM,QAAO,CAAA,EAAI,EAC1DP,QAAQQ,SACRR,QAAQS,OAAO,EACfP,IAAAA;AACF,WAAOQ,GAAGC,QAAQC,oBAChBC,QACAA,QACA;MACEC,kBAAkBC,UAAU,SAASC,YAAYC,QAAQ,QAAA,CAAA;MACzDC,iBAAiBC,SAASJ,UAAUX,IAAAA;OAEtCM,GAAGC,QAAQS,qBACTV,GAAGC,QAAQU,sBACTX,GAAGC,QAAQW,oBAAoB,OAAA,CAAA,GAEjCT,QACAH,GAAGC,QAAQY,iBAAiB,WAAA,GAC5B;MACEb,GAAGC,QAAQa,wBACTrB,QAAQa,YAAYS,YAAYzB,QAAQQ,OAAO,EAAEN,IAAAA,CAAAA;OAGrD,KAAA,GAEFW,QACAH,GAAGC,QAAQe,YAAY;MACrBC,iBAAiBC,SACf,UACAV,iBAAiBnB,MAAM;QACrB,GAAGC;QACH6B,SAAS;UACP,GAAG7B,QAAQ6B;UACXC,YAAY;UACZC,SAAS;QACX;MACF,CAAA,EAAG9B,MAAAA,EAAQ,KAAA,EAAOC,MAAMC,IAAAA,CAAAA;MAE1BO,GAAGC,QAAQqB,0BACTtB,GAAGC,QAAQsB,uBACTvB,GAAGC,QAAQY,iBAAiB,OAAA,GAC5Bb,GAAGwB,WAAWC,aACdzB,GAAGC,QAAQyB,qBACT1B,GAAGC,QAAQY,iBAAiB,YAAA,GAC5BV,QACA;QAACH,GAAGC,QAAQY,iBAAiB,OAAA;OAAS,CAAA,CAAA;MAI5Cb,GAAGC,QAAQ0B,sBACT3B,GAAGC,QAAQ2B,mBACT5B,GAAGC,QAAQyB,qBACT1B,GAAGC,QAAQY,iBAAiB,QAAA,GAC5BV,QACA;QACEH,GAAGC,QAAQY,iBAAiB,OAAA;QAC5BL,iBAAiBC,SAASoB,WAAU;OACrC,GAEH7B,GAAGC,QAAQa,wBAAwB,KAAA,CAAA,CAAA;KAGxC,CAAA;EAEL;AACJ,GArEiB1B,8BAAAA,4BAAAA,CAAAA,EAAAA;","names":["ts","JsonAssertParseProgrammer","write","project","modulo","type","name","init","JsonMetadataFactory","analyze","getText","checker","context","ts","factory","createArrowFunction","undefined","IdentifierFactory","parameter","TypeFactory","keyword","AssertProgrammer","Guardian","createImportTypeNode","createLiteralTypeNode","createStringLiteral","createIdentifier","createTypeReferenceNode","getFullName","createBlock","StatementFactory","constant","options","functional","numeric","createExpressionStatement","createBinaryExpression","SyntaxKind","EqualsToken","createCallExpression","createReturnStatement","createAsExpression","identifier"]}